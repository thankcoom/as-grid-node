# AS Grid - å°ˆæ¡ˆçµæ§‹èªªæ˜ (Project Structure)

> **æœ€å¾Œæ›´æ–°**: 2025-12-25
> **ç¶­è­·è€…**: Louis Lab

---

## ğŸ“¦ å°ˆæ¡ˆæ¦‚è¦½

AS Grid æ˜¯ä¸€å€‹å¤šçµ„ä»¶çš„ç¶²æ ¼äº¤æ˜“ SaaS å¹³å°ï¼Œç”±ä»¥ä¸‹æ ¸å¿ƒç³»çµ±çµ„æˆï¼š

```
bitget_as/
â”œâ”€â”€ ğŸ–¥ï¸  auth_server/      â† å®˜æ–¹èªè­‰ä¼ºæœå™¨ (FastAPI)
â”œâ”€â”€ ğŸŒ  saas_frontend/    â† å®˜æ–¹å‰ç«¯ç¶²ç«™ (React + Vite)
â”œâ”€â”€ ğŸ¤–  grid_node/        â† ç”¨æˆ¶äº¤æ˜“ç¯€é» (FastAPI + Trading Core)
â”œâ”€â”€ ğŸ“Š  trading_core/     â† å…±ç”¨äº¤æ˜“æ ¸å¿ƒé‚è¼¯
â”œâ”€â”€ ğŸ–±ï¸  gui/              â† æ¡Œé¢ç‰ˆ GUI (åŸå§‹ç‰ˆæœ¬, CustomTkinter)
â””â”€â”€ ğŸ“š  documentation/    â† å°ˆæ¡ˆæ–‡ä»¶
```

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ¶ç€è¦½å™¨                            â”‚
â”‚                    saas_frontend (React)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å®˜æ–¹ä¼ºæœå™¨ (Zeabur)                        â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚    auth_server      â”‚    â”‚   saas_frontend     â”‚       â”‚
â”‚   â”‚    (FastAPI)        â”‚â—„â”€â”€â”€â”‚   (Nginx/Static)    â”‚       â”‚
â”‚   â”‚                     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚   â”‚  â€¢ ç”¨æˆ¶èªè­‰         â”‚                                  â”‚
â”‚   â”‚  â€¢ UID ç™½åå–®é©—è­‰   â”‚                                  â”‚
â”‚   â”‚  â€¢ Proxy è½‰ç™¼       â”‚                                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ Proxy + JWT
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç”¨æˆ¶ç¯€é» (Zeabur/VPS)                      â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                   grid_node                          â”‚  â”‚
â”‚   â”‚                   (FastAPI)                          â”‚  â”‚
â”‚   â”‚                                                      â”‚  â”‚
â”‚   â”‚  â€¢ äº¤æ˜“åŸ·è¡Œ (trading_core)                           â”‚  â”‚
â”‚   â”‚  â€¢ å›æ¸¬ç³»çµ±                                          â”‚  â”‚
â”‚   â”‚  â€¢ é¸å¹£ç³»çµ±                                          â”‚  â”‚
â”‚   â”‚  â€¢ WebSocket å³æ™‚æ•¸æ“š                                â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ ccxt
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Bitget API    â”‚
                    â”‚   (äº¤æ˜“æ‰€)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ è©³ç´°ç›®éŒ„çµæ§‹

### 1. `auth_server/` - å®˜æ–¹èªè­‰ä¼ºæœå™¨

```
auth_server/
â”œâ”€â”€ Dockerfile              # Docker éƒ¨ç½²é…ç½®
â”œâ”€â”€ requirements.txt        # Python ä¾è³´
â”œâ”€â”€ zeabur.json             # Zeabur éƒ¨ç½²é…ç½®
â”œâ”€â”€ create_admin.py         # ç®¡ç†å“¡å¸³è™Ÿå‰µå»ºè…³æœ¬
â””â”€â”€ app/
    â”œâ”€â”€ main.py             # FastAPI å…¥å£é»
    â”œâ”€â”€ initial_data.py     # è³‡æ–™åº«åˆå§‹åŒ–
    â”œâ”€â”€ api/
    â”‚   â””â”€â”€ api_v1/
    â”‚       â”œâ”€â”€ api.py      # è·¯ç”±è¨»å†Š
    â”‚       â””â”€â”€ endpoints/
    â”‚           â”œâ”€â”€ auth.py      # ç™»å…¥/è¨»å†Š API
    â”‚           â”œâ”€â”€ users.py     # ç”¨æˆ¶ç®¡ç† API
    â”‚           â”œâ”€â”€ admin.py     # ç®¡ç†å“¡ API
    â”‚           â”œâ”€â”€ node.py      # ç¯€é»å¿ƒè·³/è¨»å†Š API
    â”‚           â””â”€â”€ proxy.py     # ä»£ç†è½‰ç™¼ API
    â”œâ”€â”€ core/
    â”‚   â”œâ”€â”€ config.py       # ç’°å¢ƒè®Šæ•¸é…ç½®
    â”‚   â””â”€â”€ security.py     # JWT/åŠ å¯†å·¥å…·
    â”œâ”€â”€ db/
    â”‚   â”œâ”€â”€ models.py       # SQLAlchemy æ¨¡å‹
    â”‚   â””â”€â”€ session.py      # è³‡æ–™åº«é€£ç·š
    â””â”€â”€ schemas/
        â””â”€â”€ __init__.py     # Pydantic è«‹æ±‚/å›æ‡‰çµæ§‹
```

**ç’°å¢ƒè®Šæ•¸**:
- `DATABASE_URL` - PostgreSQL é€£ç·šå­—ä¸²
- `SECRET_KEY` - JWT ç°½åå¯†é‘°
- `ENCRYPTION_KEY` - API æ†‘è­‰åŠ å¯†å¯†é‘°

---

### 2. `saas_frontend/` - å®˜æ–¹å‰ç«¯ç¶²ç«™

```
saas_frontend/
â”œâ”€â”€ Dockerfile              # Docker éƒ¨ç½²é…ç½®
â”œâ”€â”€ index.html              # å…¥å£ HTML
â”œâ”€â”€ package.json            # NPM ä¾è³´
â”œâ”€â”€ vite.config.js          # Vite æ‰“åŒ…é…ç½®
â”œâ”€â”€ tailwind.config.js      # TailwindCSS é…ç½®
â”œâ”€â”€ zeabur.json             # Zeabur éƒ¨ç½²é…ç½®
â””â”€â”€ src/
    â”œâ”€â”€ main.jsx            # React å…¥å£
    â”œâ”€â”€ App.jsx             # è·¯ç”±é…ç½®
    â”œâ”€â”€ index.css           # å…¨å±€æ¨£å¼
    â”œâ”€â”€ components/
    â”‚   â””â”€â”€ Icons.jsx       # SVG åœ–æ¨™çµ„ä»¶
    â”œâ”€â”€ context/
    â”‚   â”œâ”€â”€ AuthContext.jsx     # èªè­‰ç‹€æ…‹ç®¡ç†
    â”‚   â””â”€â”€ I18nContext.jsx     # å¤šèªè¨€æ”¯æ´
    â”œâ”€â”€ pages/
    â”‚   â”œâ”€â”€ Landing.jsx         # é¦–é 
    â”‚   â”œâ”€â”€ Login.jsx           # ç™»å…¥é 
    â”‚   â”œâ”€â”€ Register.jsx        # è¨»å†Šé 
    â”‚   â”œâ”€â”€ Dashboard.jsx       # ä¸»æ§å°
    â”‚   â”œâ”€â”€ Deploy.jsx          # éƒ¨ç½²å¼•å°é 
    â”‚   â”œâ”€â”€ Settings.jsx        # è¨­å®šé 
    â”‚   â”œâ”€â”€ Symbols.jsx         # äº¤æ˜“å°ç®¡ç†é 
    â”‚   â”œâ”€â”€ Backtest.jsx        # å›æ¸¬é 
    â”‚   â”œâ”€â”€ CoinSelection.jsx   # é¸å¹£ç³»çµ±é 
    â”‚   â””â”€â”€ Admin.jsx           # ç®¡ç†å“¡å¾Œå°
    â””â”€â”€ services/
        â”œâ”€â”€ api.js              # Axios å°è£
        â””â”€â”€ proxyApi.js         # ç¯€é» API ä»£ç†
```

**æŠ€è¡“æ£§**: React 18 + Vite + TailwindCSS

---

### 3. `grid_node/` - ç”¨æˆ¶äº¤æ˜“ç¯€é»

```
grid_node/
â”œâ”€â”€ Dockerfile              # Docker éƒ¨ç½²é…ç½®
â”œâ”€â”€ requirements.txt        # Python ä¾è³´
â”œâ”€â”€ template.yaml           # Zeabur Template å®šç¾©
â”œâ”€â”€ zeabur.json             # Zeabur éƒ¨ç½²é…ç½®
â”œâ”€â”€ .env.example            # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py             # FastAPI å…¥å£é»
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ config.py       # ç’°å¢ƒè®Šæ•¸é…ç½®
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ symbols.py      # äº¤æ˜“å°ç®¡ç† API
â”‚   â”‚   â”œâ”€â”€ backtest.py     # å›æ¸¬ç³»çµ± API
â”‚   â”‚   â”œâ”€â”€ coin.py         # é¸å¹£ç³»çµ± API
â”‚   â”‚   â””â”€â”€ websocket.py    # WebSocket å³æ™‚æ•¸æ“š
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ auth_client.py  # èˆ‡å®˜æ–¹ä¼ºæœå™¨é€šè¨Š
â”‚       â””â”€â”€ bot_manager.py  # äº¤æ˜“æ©Ÿå™¨äººç®¡ç†
â”œâ”€â”€ trading_core/           # (symlink æˆ–è¤‡è£½)
â”‚   â”œâ”€â”€ bot.py              # MaxGridBot æ ¸å¿ƒ
â”‚   â”œâ”€â”€ strategy.py         # ç¶²æ ¼ç­–ç•¥è¨ˆç®—
â”‚   â”œâ”€â”€ models.py           # æ•¸æ“šæ¨¡å‹
â”‚   â””â”€â”€ backtest.py         # å›æ¸¬å¼•æ“
â””â”€â”€ coin_selection/         # (symlink æˆ–è¤‡è£½)
    â””â”€â”€ ...                 # é¸å¹£æ¨¡çµ„
```

**ç’°å¢ƒè®Šæ•¸**:
- `AUTH_SERVER_URL` - å®˜æ–¹ä¼ºæœå™¨ URL
- `BITGET_UID` - Bitget ç”¨æˆ¶ UID
- `EXCHANGE_API_KEY` - Bitget API Key
- `EXCHANGE_SECRET` - Bitget API Secret
- `EXCHANGE_PASSPHRASE` - Bitget API Passphrase
- `NODE_SECRET` - ç¯€é»é©—è­‰å¯†é‘°

---

### 4. `trading_core/` - å…±ç”¨äº¤æ˜“æ ¸å¿ƒ

```
trading_core/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ bot.py              # MaxGridBot - ä¸»äº¤æ˜“æ©Ÿå™¨äºº
â”œâ”€â”€ strategy.py         # GridStrategy - ç¶²æ ¼è¨ˆç®—é‚è¼¯
â”œâ”€â”€ models.py           # GlobalConfig, SymbolConfig, BotState
â””â”€â”€ backtest.py         # GridBacktester - å›æ¸¬å¼•æ“
```

**æ ¸å¿ƒé¡åˆ¥**:
- `MaxGridBot` - æ•´åˆå„ç¨®ç­–ç•¥çš„ä¸»äº¤æ˜“å¼•æ“
- `GridStrategy` - ç´”è¨ˆç®—é‚è¼¯ (ç¶²æ ¼åƒæ•¸ã€æ­¢ç›ˆæ­¢æ)
- `GridBacktester` - æ­·å²æ•¸æ“šå›æ¸¬

---

### 5. `gui/` - æ¡Œé¢ç‰ˆ GUI (åŸå§‹ç‰ˆæœ¬)

```
gui/
â”œâ”€â”€ app.py              # ä¸»æ‡‰ç”¨å…¥å£ (CustomTkinter)
â”œâ”€â”€ trading_engine.py   # GUI èˆ‡äº¤æ˜“æ ¸å¿ƒçš„æ©‹æ¥å±¤
â”œâ”€â”€ components/         # UI çµ„ä»¶
â”œâ”€â”€ dialogs/            # å°è©±æ¡†
â”œâ”€â”€ pages/              # é é¢
â”‚   â”œâ”€â”€ trading.py      # äº¤æ˜“é 
â”‚   â”œâ”€â”€ symbols.py      # äº¤æ˜“å°ç®¡ç†é 
â”‚   â”œâ”€â”€ backtest.py     # å›æ¸¬é 
â”‚   â””â”€â”€ coin_selection.py  # é¸å¹£é 
â””â”€â”€ styles/             # æ¨£å¼å®šç¾©
```

> âš ï¸ **æ³¨æ„**: GUI ç‰ˆæœ¬ç‚ºåŸå§‹é–‹ç™¼ç‰ˆï¼ŒSaaS ç‰ˆæœ¬ä½¿ç”¨ `saas_frontend` + `grid_node`ã€‚

---

### 6. `documentation/` - å°ˆæ¡ˆæ–‡ä»¶

| æ–‡ä»¶ | èªªæ˜ |
|:---|:---|
| `README.md` | å°ˆæ¡ˆç°¡ä»‹ |
| `SYSTEM_ARCHITECTURE.md` | ç³»çµ±æ¶æ§‹è©³è§£ |
| `PRD.md` | ç”¢å“éœ€æ±‚æ–‡ä»¶ |
| `EXECUTIVE_REPORT.md` | åŸ·è¡Œæ‘˜è¦å ±å‘Š |
| `ONBOARDING.md` | æ–°æ‰‹å…¥é–€æŒ‡å— |
| `BUG_FIXES_LOG.md` | éŒ¯èª¤ä¿®å¾©æ—¥èªŒ |

---

## ğŸš€ éƒ¨ç½²èªªæ˜

### å®˜æ–¹æœå‹™ (Zeabur)
| æœå‹™ | ç›®éŒ„ | URL |
|:---|:---|:---|
| Auth Server | `auth_server/` | https://louisasgrid-api.zeabur.app |
| Frontend | `saas_frontend/` | https://louisasgrid.zeabur.app |

### ç”¨æˆ¶ç¯€é» (Zeabur Template)
| Template ID | ç›®éŒ„ | Docker Image |
|:---|:---|:---|
| RBBWT1 | `grid_node/` | `ghcr.io/thankcoom/as-grid-node:latest` |

---

## ğŸ”„ Git Workflow

- **Branch**: `main` (å”¯ä¸€åˆ†æ”¯)
- **Remote**: `github.com/thankcoom/as-grid-node`
- **CI/CD**: GitHub Actions è‡ªå‹• build Docker image

### è‡ªå‹•è§¸ç™¼æ¢ä»¶
ä¿®æ”¹ä»¥ä¸‹è·¯å¾‘æ™‚æœƒè‡ªå‹• build `grid_node` Docker image:
- `grid_node/**`
- `trading_core/**`
- `asBack/**`

---

## ğŸ“‹ å¾…æ¸…ç†é …ç›®

ä»¥ä¸‹æ–‡ä»¶/ç›®éŒ„å¯èƒ½éœ€è¦æ•´ç†ï¼š

| è·¯å¾‘ | å»ºè­° |
|:---|:---|
| `saasè¨ˆç•«.md` | ç§»è‡³ `documentation/` |
| `SaaS_IMPLEMENTATION_PLAN.md` | ç§»è‡³ `documentation/` |
| `DEPLOYMENT_FIX.md` | ç§»è‡³ `documentation/` |
| `ChatGPT Image...png` | ç§»è‡³ `assets/` æˆ–åˆªé™¤ |
| `AS_Grid_Trading_Bitget.spec` | PyInstaller é…ç½®ï¼Œå¯ä¿ç•™æˆ–ç§»è‡³ `build/` |
| `create_admin_standalone.py` | å¯ç§»è‡³ `scripts/` æˆ–åˆªé™¤ |
| `reset_password.py` | å¯ç§»è‡³ `scripts/` æˆ–åˆªé™¤ |
